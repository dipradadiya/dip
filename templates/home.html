{% extends "base.html" %}
{% load static %}

{% block head_title %}Home Page{% endblock %}

{% block css %}
<style>
/* Remove left & right space */
body, html {
    margin: 0;
    padding: 0;
    overflow-x: hidden; /* Prevents horizontal scrolling */
}

/* Make full-width layout */
.container {
    width: 100vw; /* Full viewport width */
    max-width: 100%;
    margin: 0;
    padding: 0;
}

/* Row configuration */
.row {
    display: flex;
    flex-wrap: wrap;
    justify-content: flex-start; /* Align items from left to right */
    margin: 0;
    padding: 0;
}

/* Ensure exactly 5 items per row */
.card-wrapper {
    width: 20%; /* 5 items per row */
    margin: 0;
    padding: 5px;
}

/* Card styles */
.card {
    width: 100%;
    height: 480px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    border: 1px solid #ddd;
    border-radius: 5px;
    overflow: hidden;
    box-shadow: 2px 2px 8px rgba(0,0,0,0.1);
    transition: transform 0.3s ease;
}

.card:hover {
    transform: scale(1.03); /* Hover effect */
}

/* Image handling */
.card-img-top {
    width: 100%;
    height: 450px;
    object-fit: cover; /* Prevent stretching */
}

/* Card body */
.card-body {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: 10px;
    text-align: center;
}

/* Capitalize first letter of title */
.card-title {
    text-transform: capitalize; /* Makes first letter uppercase */
    font-weight: bold;
}

/* Make price font  */
.card-price {
    font-size: 20px; /*  font size */
    font-weight: bold;
}

/* Responsive adjustments */
@media (max-width: 1200px) {
    .card-wrapper { width: 25%; } /* 4 items per row */
}

@media (max-width: 992px) {
    .card-wrapper { width: 33.33%; } /* 3 items per row */
}

@media (max-width: 768px) {
    .card-wrapper { width: 50%; } /* 2 items per row */
}

@media (max-width: 576px) {
    .card-wrapper { width: 100%; } /* 1 item per row */
}
</style>
{% endblock css %}

{% block content %}
  <main>
    <div class="container">
      <section class="text-center mb-4">
        <div class="row"> <!-- Flexbox for full-width products -->
          {% for item in object_list %}
          <div class="card-wrapper">
            <div class="card">
              <div class="view overlay">
                {% if item.image %}
                  <img src="{{ item.image.url }}" class="card-img-top" alt="{{ item.title }}">
                {% else %}
                  <img src="{% static 'images/default.jpg' %}" class="card-img-top" alt="Default Image">
                {% endif %}
                <a href="{{ item.get_absolute_url }}">
                  <div class="mask rgba-white-slight"></div>
                </a>
              </div>

              <div class="card-body">
                <h6 class="text-muted">{{ item.get_category_display }}</h6>
                <h5 class="card-title">
                  <strong>
                    <a href="{{ item.get_absolute_url }}" class="dark-grey-text">
                      {{ item.title }}
                      {% if item.is_new %}
                        <span class="badge badge-primary">NEW</span>
                      {% endif %}
                    </a>
                  </strong>
                </h5>
                <h4 class="card-price text-success">
                  {% if item.discount_price %}
                      <del class="text-danger">₹{{ item.price }}</del> ₹{{ item.discount_price }}
                    {% else %}
                      {{ item.price }}
                    {% endif %}
                </h4>
                <p class="text-muted">Stock: {{ item.stock }}</p>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
      </section>
    </div>
  </main>
{% endblock content %}
